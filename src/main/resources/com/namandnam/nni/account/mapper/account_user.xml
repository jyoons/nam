<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.namandnam.nni.account.mapper.UserMapper">

<!-- 	  <select id="getUserPassWd" parameterType="MngUser" resultType="MngUser"> -->
<!-- 	  			SELECT PSWRD -->
<!-- 	  				   ,IDX -->
<!-- 	  				   ,NAME -->
<!-- 	  				   ,MNGR_ID -->
<!-- 	  				   ,FAIL_CNT -->
<!-- 	  			       ,ROLES_IDX -->
<!-- 	  		  	  FROM TBL_MNGR -->
<!-- 	  			 WHERE  -->
<!-- 	  			 <choose> -->
<!-- 					<when test="mngrId != null and mngrId != '' "> -->
<!-- 						MNGR_ID = #{mngrId} -->
<!-- 					</when> -->
<!-- 					<otherwise> -->
<!-- 						IDX = #{idx} -->
<!-- 					</otherwise> -->
<!-- 				</choose> -->
<!-- 	  </select> -->




	  <!-- 사용자 메뉴 권한 리스트 -->
<!-- 	  <select id="selectUserMenuAuth" parameterType="MngUser" resultType="MenuAuth"> -->
<!-- 	  		  with recursive TREE_MENU as ( -->
<!-- 				  SELECT     CODE , -->
<!-- 				             NAME , -->
<!-- 				             LINK , -->
<!-- 				             PR_CODE, -->
<!-- 				             CAST(SORT AS CHAR(500)) AS mPath -->
<!-- 				    FROM     TBL_MENU -->
<!-- 				   WHERE    CODE = 'ROOT' -->
<!-- 				  UNION ALL -->
<!-- 				  SELECT     p.CODE, -->
<!-- 				             p.NAME, -->
<!-- 				             p.LINK, -->
<!-- 				             p.PR_CODE, -->
<!-- 				             CONCAT(TREE_MENU.mPath, '/', p.SORT) AS mPath -->
<!-- 				    FROM     TBL_MENU p  -->
<!-- 				   INNER JOIN TREE_MENU -->
<!-- 				          ON p.PR_CODE = TREE_MENU.CODE -->
<!-- 				) -->
<!-- 				SELECT c.*, cast(IFNULL(trm.ROLES,'0') as UNSIGNED ) as auth -->
<!-- 				  from TREE_MENU c -->
<!-- 				  left join ( SELECT * FROM TBL_ROLES_MENU WHERE ROLES_IDX = #{rolesIdx} ) trm -->
<!-- 				    on c.CODE = trm.CODE -->
<!-- 				 where c.CODE != 'ROOT' -->
<!-- 				 order by mPath -->
<!-- 	  </select> -->
	  
	  
	  
<!-- 	  <update id="updateUserPassword" parameterType="MngUser"  > -->
<!-- 			 UPDATE reflexion_dev.TBL_MNGR -->
<!-- 			  	SET PSWRD = #{pswrd} -->
<!-- 				  , DT_MDFD = now() -->
<!-- 			  WHERE IDX = #{idx} -->
<!-- 	  </update> -->
	  
	  
	  
	  
	  
	  
<!-- 	  <select id="selectMyCommList" parameterType="Community" resultType="Community"> -->
<!-- 		       SELECT A.IDX ,  -->
<!-- 		              A.CODE , -->
<!-- 		              B.NAME AS UNAME,  -->
<!-- 		              A.DEPTH,  -->
<!-- 		              A.TITLE,  -->
<!-- 		              A.CONTENTS,  -->
<!-- 		              A.OPEN_DT,  -->
<!-- 		              A.DLT_YN,  -->
<!-- 		              A.REG -->
<!-- 		       FROM   TBL_BOARD A -->
<!-- 		       		  INNER JOIN TBL_MNGR B -->
<!-- 				                ON A.U_IDX = B.IDX -->
<!-- 		       <where> -->
<!-- 		            AND A.U_IDX = #{uIdx} -->
<!-- 		       		AND A.CODE = 'CT01' -->
<!-- 		       		AND A.DEPTH = 0 -->
<!-- 		       		AND A.DLT_YN = 'N' -->
<!-- 		       		AND A.OPEN_DT <![CDATA[<]]> NOW() -->
<!-- 		       </where> -->
		       
<!-- 		       ORDER BY A.REG DESC -->
<!-- 		       LIMIT #{recordCountPerPage, jdbcType=INTEGER} OFFSET #{offsetNo, jdbcType=INTEGER} -->
<!-- 	</select> -->
	
<!-- 	<select id="selectMyQnaList" parameterType="Qna" resultType="Qna"> -->
<!-- 		SELECT	IDX, -->
<!-- 				TYP, -->
<!-- 				INQUIRY, -->
<!-- 				NAME, -->
<!-- 				REG -->
<!-- 		FROM	TBL_INQUIRY -->
<!-- 		<where> -->
<!-- 			AND U_IDX = #{uIdx} -->
<!-- 		</where> -->
<!-- 		ORDER BY REG DESC -->
<!-- 		LIMIT #{recordCountPerPage, jdbcType=INTEGER} OFFSET #{offsetNo, jdbcType=INTEGER} -->
<!-- 	</select> -->
	
	
<!-- 	<select id="selectMyCommListCnt" parameterType="Community" resultType="Integer"> -->
<!-- 		SELECT COUNT(*) -->
<!-- 		FROM TBL_BOARD -->
<!-- 		<where> -->
<!-- 			AND U_IDX = #{uIdx} -->
<!-- 			AND CODE = 'CT01' -->
<!-- 			AND DEPTH = 0 -->
<!-- 			AND DLT_YN = 'N' -->
<!-- 			AND OPEN_DT <![CDATA[<]]> NOW() -->
<!-- 		</where> -->
<!-- 	</select> -->
	
<!-- 	<select id="selectMyQnaListCnt" parameterType="Qna" resultType="Integer"> -->
<!-- 		SELECT COUNT(*) -->
<!-- 		FROM TBL_INQUIRY -->
<!-- 		WHERE U_IDX = #{uIdx} -->
<!-- 	</select> -->
	  
</mapper>